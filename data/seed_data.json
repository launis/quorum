{
    "components": [
        {
            "id": "RULE_1",
            "type": "prompt",
            "content": "SÄÄNTÖ 1 (Luottamuksen Kehä): Vain Vartija-agentin hyväksymä data on validia."
        },
        {
            "id": "RULE_6",
            "type": "prompt",
            "content": "SÄÄNTÖ 6 (Falsifioinnin Etusija): Faktat voittavat aina tulkinnat."
        },
        {
            "id": "PROMPT_GUARD",
            "type": "prompt",
            "content": "Olet Vartija-agentti. Tehtäväsi on sanitoida syöte ja tunnistaa uhat."
        },
        {
            "id": "PROMPT_ANALYST",
            "type": "prompt",
            "content": "Olet Analyytikko-agentti. Ankkuroi jokainen väite todistusaineistoon. Listaa lähteet ja selitteet (Citation: source, explanation)."
        },
        {
            "id": "PROMPT_LOGICIAN",
            "type": "prompt",
            "content": "Olet Loogikko-agentti. Muodosta hypoteesi osaamistasosta käyttäen Bloomin taksonomiaa. Listaa lähteet (esim. Bloom)."
        },
        {
            "id": "PROMPT_CRITIC_1",
            "type": "prompt",
            "content": "Olet Metodologinen Kriitikko. Etsi virheitä arviointiprosessista. Viittaa Lukuun 2."
        },
        {
            "id": "PROMPT_CRITIC_2",
            "type": "prompt",
            "content": "Olet Eettinen Kriitikko. Arvioi puolueettomuutta. Viittaa eettisiin ohjeisiin."
        },
        {
            "id": "PROMPT_JUDGE",
            "type": "prompt",
            "content": "Olet Tuomari-agentti. Tee lopullinen päätös. Muista SÄÄNTÖ 6. Perustele päätös lähteillä."
        },
        {
            "id": "PROMPT_XAI",
            "type": "prompt",
            "content": "Olet XAI-Raportoija. Generoi raportti ja kvantifioi epävarmuus. Sisällytä lähdeluettelo."
        },
        {
            "id": "DISCLAIMER",
            "type": "static_text",
            "content": "VASTUUVAPAUSLAUSEKE: Tämä on tekoälyn generoima arvio. Tarkista aina faktat alkuperäisistä lähteistä."
        }
    ],
    "steps": [
        {
            "id": "STEP_1_GUARD",
            "description": "Input Sanitization and Threat Detection",
            "input_schema": "RawInput",
            "output_schema": "TaintedData",
            "execution_config": {
                "pre_hooks": [
                    "sanitize_and_anonymize_input"
                ],
                "llm_prompts": [
                    "PROMPT_GUARD",
                    "RULE_1"
                ],
                "post_hooks": []
            }
        },
        {
            "id": "STEP_2_ANALYST",
            "description": "Evidence Anchoring",
            "input_schema": "TaintedData",
            "output_schema": "AnalysisSummary",
            "execution_config": {
                "pre_hooks": [
                    "execute_rag_retrieval"
                ],
                "llm_prompts": [
                    "PROMPT_ANALYST",
                    "RULE_1"
                ],
                "post_hooks": [
                    "parse_analyst_output"
                ]
            }
        },
        {
            "id": "STEP_3_LOGICIAN",
            "description": "Argument Construction",
            "input_schema": "AnalysisSummary",
            "output_schema": "HypothesisArgument",
            "execution_config": {
                "pre_hooks": [],
                "llm_prompts": [
                    "PROMPT_LOGICIAN",
                    "RULE_1"
                ],
                "post_hooks": [
                    "parse_logician_output"
                ]
            }
        },
        {
            "id": "STEP_ALL_CRITICS",
            "description": "Combined Criticism Phase",
            "input_schema": "HypothesisArgument",
            "output_schema": "HypothesisArgument",
            "execution_config": {
                "pre_hooks": [],
                "llm_prompts": [
                    "PROMPT_LOGICIAN",
                    "PROMPT_CRITIC_1",
                    "PROMPT_CRITIC_2",
                    "RULE_6"
                ],
                "post_hooks": []
            }
        },
        {
            "id": "STEP_7_FACT_CHECKER",
            "description": "External Verification",
            "input_schema": "HypothesisArgument",
            "output_schema": "HypothesisArgument",
            "execution_config": {
                "pre_hooks": [
                    "execute_google_search"
                ],
                "llm_prompts": [
                    "PROMPT_LOGICIAN",
                    "RULE_6"
                ],
                "post_hooks": []
            }
        },
        {
            "id": "STEP_8_JUDGE",
            "description": "Final Verdict Synthesis",
            "input_schema": "HypothesisArgument",
            "output_schema": "FinalVerdict",
            "execution_config": {
                "pre_hooks": [
                    "calculate_input_control_ratio"
                ],
                "llm_prompts": [
                    "PROMPT_JUDGE",
                    "RULE_1",
                    "RULE_6"
                ],
                "post_hooks": [
                    "parse_judge_output"
                ]
            }
        },
        {
            "id": "STEP_9_XAI",
            "description": "Reporting",
            "input_schema": "FinalVerdict",
            "output_schema": "XAIReport",
            "execution_config": {
                "pre_hooks": [],
                "llm_prompts": [
                    "PROMPT_XAI"
                ],
                "post_hooks": [
                    "generate_jinja2_report"
                ]
            }
        }
    ],
    "workflows": [
        {
            "id": "KVOORUMI_PHASED_A",
            "sequence": [
                "STEP_1_GUARD",
                "STEP_2_ANALYST",
                "STEP_3_LOGICIAN",
                "STEP_7_FACT_CHECKER",
                "STEP_8_JUDGE",
                "STEP_9_XAI"
            ],
            "default_model_mapping": {
                "STEP_1_GUARD": "gemini-1.5-flash",
                "STEP_2_ANALYST": "gemini-1.5-flash",
                "STEP_3_LOGICIAN": "gemini-1.5-pro",
                "STEP_7_FACT_CHECKER": "gemini-1.5-flash",
                "STEP_8_JUDGE": "gpt-4",
                "STEP_9_XAI": "gemini-1.5-flash"
            }
        },
        {
            "id": "KVOORUMI_OPTIMIZED",
            "sequence": [
                "STEP_1_GUARD",
                "STEP_ALL_CRITICS",
                "STEP_8_JUDGE",
                "STEP_9_XAI"
            ],
            "default_model_mapping": {
                "STEP_1_GUARD": "gemini-1.5-flash",
                "STEP_ALL_CRITICS": "gemini-1.5-pro",
                "STEP_8_JUDGE": "gpt-4",
                "STEP_9_XAI": "gemini-1.5-flash"
            }
        }
    ]
}